webpackJsonp([1],{324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(191),r=n(957),s=n.n(r),o=n(346),i=n(971),c=n.n(i),u=n(592),l=(n.n(u),n(193)),d=n.n(l);a.default.config.productionTip=!1,a.default.use(c.a),a.default.prototype.$http=d.a,a.default.material.registerTheme("default",{primary:"blue-grey",accent:"green",warn:"red",background:"white"}),new a.default({el:"#app",router:o.a,template:"<App/>",components:{App:s.a}})},346:function(e,t,n){"use strict";var a=n(191),r=n(972),s=n(960),o=n.n(s),i=n(961),c=n.n(i),u=n(958),l=n.n(u);a.default.use(r.a),t.a=new r.a({routes:[{path:"/",redirect:"/home"},{path:"/home/:id?",name:"Home",component:o.a,props:!0},{path:"/list",name:"List",component:c.a},{path:"/config",name:"Config",component:l.a}]})},347:function(e,t,n){"use strict";var a=n(61),r=n.n(a),s=n(134),o=n.n(s),i=n(60),c=n.n(i),u=n(193),l=n.n(u),d=n(75),p=n(686),f=n.n(p);t.a={mostviewed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return console.warn("mostviewed",e),l()({method:"get",url:"http://api.nytimes.com/svc/mostpopular/v2/mostviewed/all-sections/1.json",params:{"api-key":"11b83c713ccf4496ac47305da7d2295f",offset:e}})},upsert:function(e,t){var n={id:t.id.toString()};return["url","column","section","byline","title","abstract","published_date","source","des_facet","org_facet","per_facet","geo_facet","media"].forEach(function(e){n[e]=t[e]}),e.articles.upsert(n)},reload:function(){var e=this;return c()(r.a.mark(function t(){var n,a,s,i,u,l,p;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(e){return new o.a(function(t,n){setTimeout(function(){if(console.log("testupsert",e),"obj2-80"===e.id)return n("obj2-80 is unlucky");t(e)},100)})},n=function(e){return new o.a(function(t,n){setTimeout(function(){if(console.log("test",e),60===e)return n("60 is unlucky");t({data:{results:[{id:"obj1-"+e},{id:"obj2-"+e}]}})},100)})},console.log("nyt reload"),t.next=5,d.a();case 5:return s=t.sent,t.next=8,e.mostviewed();case 8:i=t.sent,u=i.data.num_results,console.log("numResults",u),i.data.results.map(function(){var t=c()(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.upsert(s,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()),u=200,l=f.a.Observable.range(20,u).bufferCount(1,20).concatAll(),p=f.a.Observable.zip(l,f.a.Observable.interval(2e3)).map(function(e){return e[0]}).switchMap(function(t){return f.a.Observable.fromPromise(e.mostviewed(t)).catch(function(e){return f.a.Observable.of({msg:"http error",error:e,x:t})}).do(function(e){return console.log("y",e)}).do(function(e){return e.msg&&console.error(e)}).filter(function(e){return"http error"!==e.msg}).map(function(e){return e.data.results}).mergeMap(function(e){return f.a.Observable.from(e)}).switchMap(function(t){return f.a.Observable.fromPromise(e.upsert(s,t)).catch(function(e){return f.a.Observable.of({msg:"upsert error",error:e,article:t})})}).do(function(e){return e.msg&&console.error(e)}).filter(function(e){return"upsert error"!==e.msg})}),p.subscribe(function(e){return console.log("x",e.toJSON?e.toJSON():e)});case 16:case"end":return t.stop()}},t,e)}))()}}},348:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(61),r=n.n(a),s=n(60),o=n.n(s),i=n(963),c=n.n(i),u=n(75);t.default={name:"app",components:{navigation:c.a},mounted:function(){function e(){return t.apply(this,arguments)}var t=o()(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a();case 2:return t=e.sent,e.next=5,t.config.findOne({name:"apikey"}).exec();case 5:n=e.sent,n&&n.value||(console.warn("no apikey, redirecting to config"),this.$router.push("Config"));case 7:case"end":return e.stop()}},e,this)}));return e}(),methods:{toggleLeftSidenav:function(){this.$refs.leftSidenav.toggle()},open:function(e){console.log("Opened: "+e)},close:function(e){console.log("Closed: "+e)}}}},349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(61),r=n.n(a),s=n(60),o=n.n(s),i=n(75);t.default={name:"hello",data:function(){return{keys:["apikey"],apikey:void 0}},mounted:function(){function e(){return t.apply(this,arguments)}var t=o()(r.a.mark(function e(){var t,n=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a();case 2:t=e.sent,this.keys.forEach(function(){var e=o()(r.a.mark(function e(a){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.config.findOne({name:a}).exec();case 2:s=e.sent,s&&(n[a]=s.value);case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e,this)}));return e}(),watch:{apikey:function(e,t){console.log("watch apikey",e,t),e&&e!==t&&this.save("apikey",e)}},methods:{keyup:function(e,t,n){console.log("keyup",e,t,n)},save:function(e,t){var n=this;return o()(r.a.mark(function a(){var s;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.warn("save",e,t),n.next=3,i.a();case 3:return s=n.sent,n.next=6,s.config.upsert({name:e,value:t});case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},a,n)}))()}}}},350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(61),r=n.n(a),s=n(60),o=n.n(s),i=n(75);t.default={props:["id"],data:function(){return{data:void 0,image:null}},created:function(){this.load(),console.log("detail created",this.id,this.data)},watch:{id:"load"},methods:{load:function(){var e=this;return o()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("detail.load",e.id),e.id){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,i.a();case 5:return n=t.sent,t.next=8,n.articles.findOne({id:e.id}).exec();case 8:e.data=t.sent,e.data&&(e.image=e.data.media[0]["media-metadata"][0].url),console.log("detail.load",e.id,e.data&&e.data.toJSON()),console.log("img",e.image);case 12:case"end":return t.stop()}},t,e)}))()}}}},351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(61),r=n.n(a),s=n(60),o=n.n(s),i=n(75),c=n(347),u=n(962),l=n.n(u),d=n(959),p=n.n(d);t.default={props:["id"],name:"home",components:{articleItem:l.a,articleDetail:p.a},data:function(){return{results:void 0,subs:[],ts:new Date}},watch:{$route:"setId"},mounted:function(){this.load(),console.log("home mounted db",this.results,this.id)},methods:{load:function(){var e=this;return o()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a();case 2:return n=t.sent,t.next=5,n.articles.find().limit(20).sort("published_date").exec();case 5:e.results=t.sent;case 6:case"end":return t.stop()}},t,e)}))()},refresh:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.results=void 0,t.next=3,c.a.reload();case 3:return t.next=5,e.load();case 5:console.log("home refresh",e.results);case 6:case"end":return t.stop()}},t,e)}))()},setId:function(){console.log("setId",this.$route,this.id)},go:function(e){console.log("go",e),this.$router.push({path:"/home/"+e})}}}},352:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(61),r=n.n(a),s=n(60),o=n.n(s),i=n(75);t.default={name:"hello",data:function(){return{results:[],subs:[],ts:new Date}},mounted:function(){function e(){return t.apply(this,arguments)}var t=o()(r.a.mark(function e(){var t,n=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a();case 2:t=e.sent,console.log("mounted db",t,t.collections),t.articles.find().exec().then(function(e){n.results=e});case 5:case"end":return e.stop()}},e,this)}));return e}()}},353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"article",props:["data"],mounted:function(){}}},354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"navigation",data:function(){return{msg:"Welcome to Your Vue.js App"}},methods:{closeSideNav:function(e){console.log("closeSideNav",this.close),this.$emit("close")}}}},592:function(e,t){},593:function(e,t){},594:function(e,t){},595:function(e,t){},596:function(e,t){},597:function(e,t){},598:function(e,t){},599:function(e,t){},626:function(e,t){e.exports={name:"levelup",description:"Fast & simple storage - a Node.js-style LevelDB wrapper",version:"1.3.3",contributors:["Rod Vagg <r@va.gg> (https://github.com/rvagg)","John Chesley <john@chesl.es> (https://github.com/chesles/)","Jake Verbaten <raynos2@gmail.com> (https://github.com/raynos)","Dominic Tarr <dominic.tarr@gmail.com> (https://github.com/dominictarr)","Max Ogden <max@maxogden.com> (https://github.com/maxogden)","Lars-Magnus Skog <ralphtheninja@riseup.net> (https://github.com/ralphtheninja)","David Bj√∂rklund <david.bjorklund@gmail.com> (https://github.com/kesla)","Julian Gruber <julian@juliangruber.com> (https://github.com/juliangruber)","Paolo Fragomeni <paolo@async.ly> (https://github.com/0x00a)","Anton Whalley <anton.whalley@nearform.com> (https://github.com/No9)","Matteo Collina <matteo.collina@gmail.com> (https://github.com/mcollina)","Pedro Teixeira <pedro.teixeira@gmail.com> (https://github.com/pgte)","James Halliday <mail@substack.net> (https://github.com/substack)","Jarrett Cruger <jcrugzz@gmail.com> (https://github.com/jcrugzz)"],repository:{type:"git",url:"https://github.com/level/levelup.git"},homepage:"https://github.com/level/levelup",keywords:["leveldb","stream","database","db","store","storage","json"],main:"lib/levelup.js",dependencies:{"deferred-leveldown":"~1.2.1","level-codec":"~6.1.0","level-errors":"~1.0.3","level-iterator-stream":"~1.3.0",prr:"~1.0.1",semver:"~5.1.0",xtend:"~4.0.0"},devDependencies:{async:"~1.5.0",bustermove:"~1.0.0",tap:"~2.3.1",delayed:"~1.0.1",faucet:"~0.0.1",leveldown:"^1.1.0",memdown:"~1.1.0","msgpack-js":"~0.3.0",referee:"~1.2.0",rimraf:"~2.4.3","slow-stream":"0.0.4",tape:"~4.2.1"},browser:{leveldown:!1,"leveldown/package":!1,semver:!1},scripts:{test:"tape test/*-test.js | faucet"},license:"MIT"}},75:function(e,t,n){"use strict";function a(){return p||(p=f()),p}var r=n(61),s=n.n(r),o=n(134),i=n.n(o),c=n(60),u=n.n(c),l=n(682);n.n(l);t.a=a,l.plugin(n(638)),l.plugin(n(645)),console.log("state adapters",l.PouchDB.adapters);var d=[{name:"config",schema:{title:"app config",description:"store application configuration",version:0,type:"object",properties:{name:{type:"string",primary:!0},value:"string"}}},{name:"articles",schema:{title:"article schema",description:"articles from nyt api",version:1,type:"object",properties:{id:{type:"string",primary:!0},url:"string",column:"string",section:"string",byline:"string",title:"string",abstract:"string",published_date:{type:"string",index:!0},source:"string",des_facet:[],org_facet:[],per_facet:[],geo_facet:[],media:[]}},migrationStrategies:{1:function(e){return e}}}],p=null,f=function(){var e=u()(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("DatabaseService: creating database.."),e.next=3,l.create({name:"nytdb2",adapter:"memory",multiInstance:!0});case 3:return t=e.sent,console.log("DatabaseService: created database",t),window.db=t,console.log("DatabaseService: create collections",d.length),e.next=9,i.a.all(d.map(function(e){return t.collection(e)}));case 9:return n=e.sent,console.log("DatabaseService: created collections",n),e.abrupt("return",t);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},957:function(e,t,n){n(598);var a=n(73)(n(348),n(969),null,null);e.exports=a.exports},958:function(e,t,n){n(595);var a=n(73)(n(349),n(966),"data-v-42c3a4ec",null);e.exports=a.exports},959:function(e,t,n){n(596);var a=n(73)(n(350),n(967),null,null);e.exports=a.exports},960:function(e,t,n){n(599);var a=n(73)(n(351),n(970),"data-v-c49446ee",null);e.exports=a.exports},961:function(e,t,n){n(593);var a=n(73)(n(352),n(964),"data-v-0ae5a0c8",null);e.exports=a.exports},962:function(e,t,n){n(594);var a=n(73)(n(353),n(965),"data-v-36bce248",null);e.exports=a.exports},963:function(e,t,n){n(597);var a=n(73)(n(354),n(968),"data-v-6aad4d9e",null);e.exports=a.exports},964:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  List View\n")])},staticRenderFns:[]}},965:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-list-item",[n("md-avatar",{staticClass:"md-avatar-icon text-icon"},[n("div",{staticClass:"text-icon-letter"},[e._v("\n      "+e._s(e.data.section.substring(0,1))+"\n    ")])]),e._v(" "),n("div",{staticClass:"md-list-text-container"},[n("span",[n("b",[e._v(e._s(e.data.section))]),e._v(" : "+e._s(e.data.title))]),e._v(" "),n("span",[e._v(e._s(e.data.byline)+" - Published: "+e._s(e.data.published_date))]),e._v(" "),n("p",[e._v(e._s(e.data.abstract.substring(0,100)))])])],1)},staticRenderFns:[]}},966:function(e,t){e.exports={render:function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"config"},[a("form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.submit(e)}}},[a("h1",[t._v("Configuration")]),t._v(" "),t._m(0),t._v(" "),a("md-input-container",[a("md-icon",[t._v("\n        vpn_key\n      ")]),t._v(" "),a("label",[t._v("API Key")]),t._v(" "),a("md-input",{attrs:{required:"",type:"text"},model:{value:t.apikey,callback:function(e){t.apikey=e},expression:"apikey"}}),t._v(" "),a("span",{staticClass:"md-error"},[t._v("Validation message")])],1),t._v(" "),a("pre",[t._v("\n      "+t._s(t.keys.map(function(t){return t+":"+e[t]}).join(","))+"\n    ")])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n        Access to The New York Times API requires a key.  You can obtain a key by visiting "),n("a",{attrs:{href:"https://developer.nytimes.com"}},[e._v("developer.nytimes.com")]),e._v(".\n      ")])}]}},967:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail"},[e.id?n("md-card",[n("md-card-media-cover",{attrs:{"md-solid":""}},[n("md-card-media",{attrs:{"md-ratio":"1:1"}},[n("md-image",{attrs:{"md-src":e.image}})],1),e._v(" "),n("md-card-area",[n("md-card-header",[n("div",{staticClass:"md-title"},[e._v(e._s(e.data.title))]),e._v(" "),n("div",{staticClass:"md-subhead"},[e._v(e._s(e.data.abstract))])]),e._v(" "),n("md-card-actions",[n("md-button",{attrs:{href:e.data.url}},[e._v("Read Article")])],1)],1)],1)],1):n("span",[e._v("Loading...")])],1)},staticRenderFns:[]}},968:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navigation"},[n("router-link",{staticClass:"md-button",attrs:{tag:"button",to:"/"},nativeOn:{click:function(t){e.closeSideNav(t)}}},[e._v("Home")]),e._v(" "),n("router-link",{staticClass:"md-button",attrs:{tag:"button",to:"/config"},nativeOn:{click:function(t){e.closeSideNav(t)}}},[e._v("Config")])],1)},staticRenderFns:[]}},969:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"phone-viewport",attrs:{id:"app"}},[n("md-toolbar",[n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(t){e.toggleLeftSidenav(t)}}},[n("md-icon",[e._v("menu")])],1),e._v(" "),n("h2",{staticClass:"md-title"},[e._v("NYT Explorer")])],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("router-view")],1),e._v(" "),n("md-sidenav",{ref:"leftSidenav",staticClass:"md-left side-nav",on:{open:function(t){e.open("Left")},close:function(t){e.close("Left")}}},[n("md-toolbar",{staticClass:"md-large side-nav-toolbar"},[n("div",{staticClass:"md-toolbar-container"},[n("div",{staticClass:"side-nav-title"},[n("h3",{staticClass:"md-title"},[e._v("The New York Times")]),e._v(" "),n("div",[e._v("\n            Explore the most viewed articles via The New York Times API.\n          ")])])])]),e._v(" "),n("navigation",{on:{close:function(t){e.toggleLeftSidenav()}}})],1)],1)},staticRenderFns:[]}},970:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"toolbar"},[n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(t){e.refresh(t)}}},[n("md-icon",[e._v("refresh")])],1)],1),e._v(" "),n("md-layout",{staticClass:"content",attrs:{"md-gutter":""}},[n("md-layout",{attrs:{"md-flex":"50"}},[void 0!==e.results&&e.results.length>0?n("div",{staticClass:"article-list"},e._l(e.results,function(t){return n("md-list",{key:t.id,staticClass:"custom-list md-triple-line"},[n("article-item",{attrs:{data:t},nativeOn:{click:function(n){e.go(t.id)}}})],1)})):void 0!==e.results&&0===e.results.length?n("span",[e._v("No Articles")]):n("span",[e._v("Loading..")])]),e._v(" "),n("md-layout",[n("article-detail",{attrs:{id:e.id}})],1)],1)],1)},staticRenderFns:[]}},975:function(e,t){},976:function(e,t){},977:function(e,t){},978:function(e,t){},979:function(e,t){},980:function(e,t){},981:function(e,t){},982:function(e,t,n){n(325),e.exports=n(324)}},[982]);
//# sourceMappingURL=app.e06fba30ecd21ca290c5.js.map